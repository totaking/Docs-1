
If it is not convenient to connect to external network, you can also build a private chain.

`PlatON` supports single-node mode and cluster mode for running private networks. Similarly, before setting up private chain, please ensure that the server has the following conditions:

 
1. The PlatON environment has been installed according to the [PlatON Installation Guide](/en-us/Node/_[English]-Install-Node.md).

2. According to [Node KeyPair](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Node-key) chapter in the '~/platon-node/data' directory Node private key and node BLS private key are generated.


## Solo Mode

**1. Generate Genesis Block Configuration File `platon.json`**

Create a genesis block file in the working directory, copy the following, and modify `your-node-pubkey` to [Node KeyPair](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Node-Public-and-Private-Key) generated ***node public key***, `your-node-blspubkey` is [Node KeyPair](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Node-BLS-Public-and-Private-Key) generated ***node bls public key***, so that the local node becomes a consensus node to participate in consensus. Modify `your-account-address` to the ***Address*** generated by [Wallet File](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Wallet-file). `platon.json` reads as follows:

```
{
	"config": {
		"chainId": 299,
		"eip155Block": 1,
		"VMInterpreter": "evm",
		"cbft": {
			"initialNodes": [{
				"node": "enode://your-node-pubkey@127.0.0.1:16789",
				"blsPubKey": "your-node-blspubkey"
			}],
			"amount": 10,
			"period": 20000,
			"validatorMode": "ppos"
		},
		"genesisVersion": 2304
	},
	"economicModel": {
		"common": {
			"maxEpochMinutes": 360,
			"maxConsensusVals": 25,
			"additionalCycleTime": 525960
		},
		"staking": {
			"stakeThreshold": 1000000000000000000000000,
			"operatingThreshold": 10000000000000000000,
			"maxValidators": 101,
			"unStakeFreezeDuration": 28
		},
		"slashing": {
			"slashFractionDuplicateSign": 10,
			"duplicateSignReportReward": 50,
			"maxEvidenceAge": 27,
			"slashBlocksReward": 0
		},
		"gov": {
			"versionProposalVoteDurationSeconds": 1209600,
			"versionProposalSupportRate": 0.667,
			"textProposalVoteDurationSeconds": 1209600,
			"textProposalVoteRate": 0.5,
			"textProposalSupportRate": 0.667,
			"cancelProposalVoteRate": 0.50,
			"cancelProposalSupportRate": 0.667,
			"paramProposalVoteDurationSeconds": 1209600,
			"paramProposalVoteRate": 0.50,
			"paramProposalSupportRate": 0.667
		},
		"reward": {
			"newBlockRate": 50,
			"platonFoundationYear": 10
		},
		"innerAcc": {
			"platonFundAccount": "0xBE0af016941Acaf08Bf5f4ad185155Df6B7388ce",
			"platonFundBalance": 0,
			"cdfAccount": "0x08b2320Ef2482f0a5ad9411CCB1a748BcE7c2823",
			"cdfBalance": 331811981000000000000000000
		}
	},
	"nonce": "0x0376e56dffd12ab53bb149bda4e0cbce2b6aabe4cccc0df0b5a39e12977a2fcd23",
	"timestamp": "0x5bc94a8a",
	"extraData": "0xd782070186706c61746f6e86676f312e3131856c696e757800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
	"gasLimit": "4712388",
	"alloc": {
		"1000000000000000000000000000000000000003": {
			"balance": "200000000000000000000000000"
		},
		"your-account-address": {
		  "balance": "999000000000000000000"
		}
	},
	"number": "0x0",
	"gasUsed": "0x0",
	"parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000"
}
```


**2. Initialize creation information according to the `platon.json`**

```
./platon --datadir ./data init platon.json
```

The following prompt appears to indicate that initialization is complete.

```
Successfully wrote genesis state
```

**3.Start node**

```
./platon --identity "platon" --datadir ./data --port 16789 --rpcaddr 127.0.0.1 --rpcport 6789 --rpcapi "db,platon,net,web3,admin,personal" --rpc --nodiscover --nodekey ./data/nodekey --cbft.blskey ./data/blskey
```

Logging of increasing blockNumber in standard output. **indicates that the private chain with one node was successfully started, and the block was successfully generated**.


> [!NOTE|style:flat|label:Note]
>
>Be sure to specify <font color=red>--datadir</font> otherwise the node will initialize the main net by default and connect to the main net.

At this point we have set up a private chain with a single node. The network name is `platon`.

**4. Run in the background**

Normally, the process is always in the foreground, so we can not perform other operations, and if you quit the terminal halfway, the process will exit.

In Ubuntu, you can start the program in nohup mode:

```
nohup ./platon --identity "platon" --datadir ./data --port 16789 --rpcaddr 127.0.0.1 --rpcport 6789 --rpcapi "db,platon,net,web3,admin,personal" --rpc --nodiscover --nodekey ./data/nodekey --cbft.blskey ./data/blskey &
```

After prompting nohup successfully in the shell, press Enter again to ensure that the process will not be exited by closing the terminal.

**Windows does not support running in the background.**

## Multiple Nodes

`PlatON cluster` is a private chain with multiple nodes. Here we assume that you can already build a single node. And we will build a network of two nodes on one server. More nodes are similar in operation flow.

To run PlatON multi-node locally, need to make sure:

- Each node instance has a separate data directory (--datadir)

- Each instance runs on a different port, whether it is a p2p port or an rpc port (--port and --rpcport)

- Nodes can be interconnected with each other

- RPC server port is not occupied


**1. Create directory**

Create directories data0 and data1 under the platon-node directory as the data directories for the two nodes. Generate two coinbase accounts for each node.

```
mkdir data0 data1
```


**2. Generate key pair**

According to the [Node KeyPair](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Node-key) section, two pairs of node private keys and node BLS private keys were generated.

Save the nodekey and blskey of 2 nodes to 'data0' and 'data1' respectively

```
echo {node0-nodekey} > ./data0/nodekey 
echo {node0-blskey} > ./data0/blskey 
echo {node1-nodekey} > ./data1/nodekey 
echo {node1-blskey} > ./data1/blskey 
```

**3. Editing genesis files**

Modify the file `platon.json`.

Add the node information of the two nodes to the **initialNodes** array. Because we set up a chain of two nodes, the array length is 2.
Modify the `platon.json` file:
Please replace the contents of the following files 'node0-nodekey', 'node1-nodekey', 'node0-blspubkey' and 'node1-blspubkey' with the node public key and node bls public key generated in the previous step, respectively.
Replace 'your-account-address' with the wallet address generated in the [Wallet File](/en-us/Node/_[English]-WalletFile-and-KeyPair.md#Wallet-file) section.


```
……
  "cbft": {
  "initialNodes": [{
		"node": "enode://node0-pubkey@127.0.0.1:16789",
		"blsPubKey": "node0-blspubkey"
	},{
		"node": "enode://node1-pubkey@127.0.0.1:16790",
		"blsPubKey": "node1-blspubkey"
	}],
	……
  "alloc": {
    "your-account-address": {
      	"balance": "999000000000000000000"
    },
    "1000000000000000000000000000000000000003": {
		"balance": "200000000000000000000000000"
	}
  },
……
```

**4. Initialization and startup**

Initialize genesis block information for node 0 and node 1, respectively:


```
./platon --datadir ./data0 init platon.json && ./platon --datadir ./data1 init platon.json
```

 

After successful initialization, start node 0 and node 1 in nohup mode:

 

```
nohup ./platon --identity "platon" --datadir ./data0 --port 16789 --rpcaddr 127.0.0.1 --rpcport 6789 --rpcapi "db,platon,net,web3,admin,personal" --rpc --nodiscover --nodekey ./data0/nodekey --cbft.blskey ./data0/blskey &

nohup ./platon --identity "platon" --datadir ./data1 --port 16790 --rpcaddr 127.0.0.1 --rpcport 6790 --rpcapi "db,platon,net,web3,admin,personal" --rpc --nodiscover --nodekey ./data1/nodekey --cbft.blskey ./data1/blskey &
```


**5. Check**

Enter the platon console of any node, check whether the node has established a connection with the peer, and determine whether the cluster has been successfully started by checking whether the blockNumber is continuously increasing.